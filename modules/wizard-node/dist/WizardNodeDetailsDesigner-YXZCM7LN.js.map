{
  "version": 3,
  "sources": ["../src/views/details/views/designer/containers/WizardNodeDetailsDesigner.tsx", "../src/views/details/views/designer/queries/WizardNodeMutation.ts"],
  "sourcesContent": ["import { Box, ButtonSubmit, Chip, ControlListProps, Metadata, RightSidebar, useGraphqlMutation, useTranslations } from \"@mzara/component\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport { useWizardNodeDetailsQuery } from 'views/details/hooks/useWizardNodeDetailsQuery'\r\nimport _ from 'lodash'\r\nimport { ControlListDesigner, ControlListDesignerProperties, useControlListDesignerValueState } from \"@mzara/control-list-designer\"\r\nimport { useEffect, useMemo, useState } from \"react\"\r\nimport { TWizardNode } from \"@mzara/graphql\"\r\nimport { WIZARD_NODE_MUTATION } from \"../queries/WizardNodeMutation\"\r\n\r\nconst WizardNodeDetailsDesigner = () => {\r\n\r\n    const [\r\n        SAVE,\r\n        PROPERTIES\r\n    ] = useTranslations(i18n)\r\n    const { id } = useParams()\r\n    const { data } = useWizardNodeDetailsQuery(parseInt(id), true)\r\n    const [dirty, setDirty] = useState(false)\r\n    const [value] = useControlListDesignerValueState(id)\r\n    const mutation = useGraphqlMutation<TWizardNode>(WIZARD_NODE_MUTATION)\r\n\r\n    const defaultValue = useMemo(() => {\r\n        const _val = JSON.parse(data.value || JSON.stringify(defaultForm))\r\n        _val.data.nodeKey = data.nodeKey\r\n        return _val\r\n    }, [data])\r\n\r\n    useEffect(() => {\r\n        if (value && !_.isEqual(defaultValue.data, value.data)) {\r\n            setDirty(true)\r\n        }\r\n    }, [value])\r\n\r\n    const handleSaveClick = () => {\r\n        mutation.mutate({\r\n            data: {\r\n                id: data.id,\r\n                nodeKey: value.data.nodeKey,\r\n                value: JSON.stringify(value)\r\n            }\r\n        }, {\r\n            onSuccess: () => setDirty(false)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-3\">\r\n            <div className=\"flex\">\r\n                <ButtonSubmit\r\n                    className='btn-primary ml-auto'\r\n                    startIcon=\"fa-solid fa-save\"\r\n                    label={SAVE}\r\n                    isSubmit={mutation.isLoading}\r\n                    onClick={handleSaveClick}\r\n                    disabled={!dirty}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"max-w-xl w-full m-auto\">\r\n                <ControlListDesigner id={id} defaultValue={defaultValue} />\r\n            </div>\r\n\r\n            <RightSidebar className=\"right-sidebar-absolute\">\r\n                <Box title={PROPERTIES} icon=\"fa-solid fa-cog\" className=\"box-transparent box-shadow-none box-p-0\">\r\n                    <ControlListDesignerProperties id={id} />\r\n                </Box>\r\n            </RightSidebar>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst i18n = [\r\n    'std_save',\r\n    'Bo.WizardNode.Details.ControlDesigner.Properties.title',\r\n]\r\n\r\nconst defaultForm: ControlListProps = {\r\n    data: {\r\n        title: 'Titre',\r\n        description: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod',\r\n        forms: [],\r\n        value: {},\r\n        next: {\r\n            label: 'Suivant'\r\n        },\r\n        back: {\r\n            label: 'Pr\u00E9c\u00E9dent'\r\n        }\r\n    }\r\n}\r\n\r\nexport default WizardNodeDetailsDesigner\r\n", "\r\nexport const WIZARD_NODE_MUTATION = `\r\nmutation ($data: JSONObject) {\r\n    saveWizardNode (data: { data: $data }){ id }\r\n}\r\n`\r\n"],
  "mappings": ";;;;;;;AAAA,SAAS,KAAK,cAAgD,cAAc,oBAAoB,uBAAuB;AACvH,SAAS,iBAAiB;AAE1B,OAAO,OAAO;AACd,SAAS,qBAAqB,+BAA+B,wCAAwC;AACrG,SAAS,WAAW,SAAS,gBAAgB;;;ACJtC,IAAM,uBAAuB;AAAA;AAAA;AAAA;AAAA;;;ADDpC;AASA,IAAM,4BAA4B,MAAM;AAEpC,QAAM;AAAA,IACF;AAAA,IACA;AAAA,EACJ,IAAI,gBAAgB,IAAI;AACxB,QAAM,EAAE,GAAG,IAAI,UAAU;AACzB,QAAM,EAAE,KAAK,IAAI,0BAA0B,SAAS,EAAE,GAAG,IAAI;AAC7D,QAAM,CAAC,OAAO,QAAQ,IAAI,SAAS,KAAK;AACxC,QAAM,CAAC,KAAK,IAAI,iCAAiC,EAAE;AACnD,QAAM,WAAW,mBAAgC,oBAAoB;AAErE,QAAM,eAAe,QAAQ,MAAM;AAC/B,UAAM,OAAO,KAAK,MAAM,KAAK,SAAS,KAAK,UAAU,WAAW,CAAC;AACjE,SAAK,KAAK,UAAU,KAAK;AACzB,WAAO;AAAA,EACX,GAAG,CAAC,IAAI,CAAC;AAET,YAAU,MAAM;AACZ,QAAI,SAAS,CAAC,EAAE,QAAQ,aAAa,MAAM,MAAM,IAAI,GAAG;AACpD,eAAS,IAAI;AAAA,IACjB;AAAA,EACJ,GAAG,CAAC,KAAK,CAAC;AAEV,QAAM,kBAAkB,MAAM;AAC1B,aAAS,OAAO;AAAA,MACZ,MAAM;AAAA,QACF,IAAI,KAAK;AAAA,QACT,SAAS,MAAM,KAAK;AAAA,QACpB,OAAO,KAAK,UAAU,KAAK;AAAA,MAC/B;AAAA,IACJ,GAAG;AAAA,MACC,WAAW,MAAM,SAAS,KAAK;AAAA,IACnC,CAAC;AAAA,EACL;AAEA,SACI,qBAAC;AAAA,IAAI,WAAU;AAAA,IACX;AAAA,0BAAC;AAAA,QAAI,WAAU;AAAA,QACX,8BAAC;AAAA,UACG,WAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO;AAAA,UACP,UAAU,SAAS;AAAA,UACnB,SAAS;AAAA,UACT,UAAU,CAAC;AAAA,SACf;AAAA,OACJ;AAAA,MAEA,oBAAC;AAAA,QAAI,WAAU;AAAA,QACX,8BAAC;AAAA,UAAoB;AAAA,UAAQ;AAAA,SAA4B;AAAA,OAC7D;AAAA,MAEA,oBAAC;AAAA,QAAa,WAAU;AAAA,QACpB,8BAAC;AAAA,UAAI,OAAO;AAAA,UAAY,MAAK;AAAA,UAAkB,WAAU;AAAA,UACrD,8BAAC;AAAA,YAA8B;AAAA,WAAQ;AAAA,SAC3C;AAAA,OACJ;AAAA;AAAA,GACJ;AAER;AAEA,IAAM,OAAO;AAAA,EACT;AAAA,EACA;AACJ;AAEA,IAAM,cAAgC;AAAA,EAClC,MAAM;AAAA,IACF,OAAO;AAAA,IACP,aAAa;AAAA,IACb,OAAO,CAAC;AAAA,IACR,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,MACF,OAAO;AAAA,IACX;AAAA,IACA,MAAM;AAAA,MACF,OAAO;AAAA,IACX;AAAA,EACJ;AACJ;AAEA,IAAO,oCAAQ;",
  "names": []
}
